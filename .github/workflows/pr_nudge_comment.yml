name: PR Nudge Comment
on:
  pull_request_target:
    types: [opened]

jobs:
  nudge:
    runs-on: ubuntu-latest
    permissions:
      pull-requests: write
    steps:
      - uses: actions/github-script@v7
        with:
          script: |
            const pr = context.payload.pull_request;
            const body = (pr.body || "").toLowerCase();
            const must = ["uppfyllir atriÃ°iÃ° matskvarÃ°a", "er textinn lÃ¦silegur og rÃ©ttur", "skrifaÃ°u hvaÃ° mÃ¡ betur fara"];
            const missing = must.filter(k => !body.includes(k));
            if (missing.length === 0) return;

            await github.rest.issues.createComment({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: pr.number,
              body: `ğŸ‘‹ HÃ¦ ${pr.user.login}!\nVinsamlegast fylltu Ãºt PR formiÃ° alveg.\nVantar: **${missing.join(", ")}**.\nÃetta er nauÃ°synlegt svo PR geti fariÃ° Ã­ gegn. ğŸ™`
            });
